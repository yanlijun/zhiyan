/* ZhiYan - v1.0.0 - 2016-11-01
** Copyright (c) 2016 */
window.jQuery=window.jQuery||{},function(a){"use strict";function b(b){b.each(function(){function b(){var b=d.find(":radio, :checkbox");b.each(function(){var b=this,c=!0;a.each(e,function(a){e[a]===b.name&&(c=!1)}),c&&e.push(b.name)})}function c(){a.each(e,function(b,c){function e(){var a=parseInt(g.filter(":checked").val());a===-1?h.show():h.hide()}function f(){e(),g.each(function(){var b=this,c=a(b).parent("label");b.disabled&&c.addClass("disabled"),b.checked?c.addClass("checked"):c.removeClass("checked")})}var g=a("input[name="+c+"]"),h=d.next();f(),g.on("change",f)})}var d=a(this),e=[];b(),c()})}function c(b){b.each(function(){var b=a(this),c=b.parent(".zy-mall-filter");b.on("click",function(){c.toggleClass("show")})})}function d(b){var c=a(".zy-datetime-box"),d=c.find(".zy-datetime-btn"),e=c.find("input[name=date]"),f=c.find("input[name=time]");b.each(function(){function b(){var b=e.val(),c=f.filter(":checked"),d="";return a.each(c,function(){var b=a(this).val();d+=b&&" "+b}),b&&h.text(b+d),!1}var g=a(this),h=g.prev(".times-show");g.on("click",function(){return layer.open({type:1,title:!1,skin:"zy-datetime",content:c,cancel:function(){d.off("click")}}),d.on("click",b),!1})})}function e(b){b.mousewheel(function(a,b){this.scrollLeft-=30*b,a.preventDefault()}),b.is(".thumbnail")&&b.each(function(){var b=this;a(b).children("a").on("click",function(){var c=a(this);b.scrollLeft=c[0].offsetLeft+(c.width()-a(b).width())/2})})}function f(b){var c=a("#service_dialog");b.each(function(){var b=a(this),d=b.attr("href");b.on("click",function(){return c.load("system.html "+d,function(){layer.open({type:1,title:!1,area:[],skin:"zy-service-dialog",content:a(this)})}),!1})})}function g(b){var c=a(".zy-header");b.each(function(){var b=a(this),d=a(b.attr("href"));b.on("click",function(){var b=c.height(),e=d.offset().top;return a("html, body").animate({scrollTop:e-b},500),!1})})}function h(b){function c(a,b){var c=new BMap.Map(a[0]);c.centerAndZoom(b,16),c.enableScrollWheelZoom(),c.addOverlay(new BMap.Marker(b)),a.on("map.reset",function(){c.centerAndZoom(b,16)})}function d(){var a=document.createElement("script"),b="pSGAnLpdWH13CLqHRikFYEtAkvzyMUjE";a.type="text/javascript",a.src="http://api.map.baidu.com/api?v=2.0&ak="+b+"&callback=$.fn.getBDMap",document.body.appendChild(a)}a.fn.getBDMap=function(){b.each(function(){var b=a(this),d=b.data("map").split("|"),e=new BMap.Geocoder;e.getPoint(d[0]+d[1],function(a){a?c(b,a):alert("您的地址没有解析到结果!")},d[0])})},window.onload=d}function i(b){b.each(function(){var b=a(this),c=a("<img>"),d=b.css("background-image"),e="../assets/images/img-none.png";c[0].onerror=function(){b.css("background-image","url("+e+")")},c.attr("src",d.slice(5,d.length-2))})}a.fn.runFunction=function(b){var c=a(this);c.length&&b(c)},a(function(){a(".select-card, .select-bank").runFunction(b),a(".more-filter").runFunction(c),a(".times-select").runFunction(d),a(".ft-content, .thumbnail").runFunction(e),a(".zy-service:not(.anchor)").runFunction(f),a(".zy-service.anchor").runFunction(g),a(".zy-map").runFunction(h),a(".item-vi>.vi-img").runFunction(i)})}(jQuery),function(a){"use strict";a.fn.countdown=function(b){var c={time:60,callback:function(){}},d=a.extend({},c,b||{});return"function"==typeof b&&(d.callback=b),"number"==typeof b&&(d.time=b),this.each(function(){var b,c,e=a(this),f=e.is("input")?"val":"text",g=e.is("a"),h=e[f](),i=" 秒后重试";c="number"==typeof d.time?d.time:60,g?e.addClass("disabled"):e[0].disabled=!0,e[f](c+i),b=setInterval(function(){c--,c<0?(clearInterval(b),g?e.removeClass("disabled"):e[0].disabled=!1,e[f](h),"function"==typeof d.callback&&d.callback()):e[f](c+i)},1e3)})}}(jQuery),function(a){"use strict";a.fn.linkage=function(b){var c={id:null,dataUrl:"data.json",callback:function(){}},d=a.extend({},c,b||{});return"number"==typeof b&&(d.id=b),"function"==typeof b&&(d.callback=b),this.each(function(){function b(){var b='<option value="0">请选择</option>';a.each(l,function(a,c){b+='<option value="'+c.id+'"'+(k.provId===c.id?" selected":"")+">"+c.name+"</option>"}),h.html(b),c()}function c(){var b=h.get(0).selectedIndex-1,c='<option value="0">请选择</option>';b!==-1&&a.each(l[b].children,function(a,b){c+='<option value="'+b.id+'"'+(k.cityId===b.id?" selected":"")+">"+b.name+"</option>"}),i.html(c),e()}function e(){var b=h.get(0).selectedIndex-1,c=i.get(0).selectedIndex-1,d='<option value="0">请选择</option>';b!==-1&&c!==-1?"undefined"==typeof l[b].children[c].children?j.hide():(j.show(),a.each(l[b].children[c].children,function(a,b){d+='<option value="'+b.id+'"'+(k.areaId===b.id?" selected":"")+">"+b.name+"</option>"})):j.hide(),j.html(d),f()}function f(){var a=h.find("option:not(:first):selected").text(),b=i.find("option:not(:first):selected").text(),c=j.find("option:not(:first):selected").text(),d=a+(b&&"|"+b)+(c&&"|"+c);g.data("address",d)}var g=a(this),h=g.find(".province"),i=g.find(".city"),j=g.find(".area"),k={},l=[];h.change(c),i.change(e),j.change(f),a.getJSON(d.dataUrl,function(c){l=c,a.each(l,function(b,c){return c.id===d.id?(k.provId=c.id,!1):void a.each(l[b].children,function(e,f){return f.id===d.id?(k.provId=c.id,k.cityId=f.id,!1):void a.each(l[b].children[e].children,function(a,b){if(b.id===d.id)return k.provId=c.id,k.cityId=f.id,k.areaId=b.id,!1})})}),b(),"function"==typeof d.callback&&d.callback()})})}}(jQuery),function(a){"use strict";function b(b,c){var d=c.find(".title, .nav>li"),e=b.hasClass("fold"),f={placement:"right",container:"body"};e?d.each(function(){f.title=a(this).find("span").text(),a(this).tooltip(f)}):d.tooltip("destroy")}function c(b){var c=b.find(".title");c.on("click",function(){var b=a(this);b.toggleClass("pull"),b.next().toggleClass("hide")})}function d(){var d=a("#zy_sidebar"),e=d.find(".zy-sidebar-nav"),f=d.find(".zy-sidebar-collapse");d.length&&(f.on("click",function(){d.toggleClass("fold"),d.next().toggleClass("unfold"),b(d,e)}),c(e))}a(function(){d()})}(jQuery);